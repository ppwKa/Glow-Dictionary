# Glow Dictionary Roadmap

> 本文档描述了 Glow Dictionary 的演进方向、版本里程碑与优先级。目标：兼顾**编辑效率、阅读体验与性能稳定**，并逐步支持团队协作与学习闭环。

## 产品原则

1. **本地优先**：数据可离线使用，默认不出网。
2. **低打扰**：仅在需要时注入；高亮与卡片不影响页面交互。
3. **高性能**：逐步引入视口扫描、分桶、Worker、缓存。
4. **可成长**：面向个人与团队两种模式，支持词库分层与权限。
5. **可移植**：词库可导入/导出（JSON/CSV/TSV/Anki），便于迁移。

## 里程碑

### v0.3 — 管理与易用性（近期）

* **CSV/TSV 导入导出**（列映射与模板示例）。
* **站点快速开关**（Popup）：一键启停当前域。
* **忽略清单**：支持域名/选择器排除（如代码块、评论区）。
* **卡片固定/解锁**（Pin）与**快捷键**（显示/隐藏/固定）。
* **可配置选项源**：在 Options 中自定义“词性/标签/场景”的选项集。

### v0.4 — 性能与词形（中期）

* **IntersectionObserver 仅视口扫描**，滚动增量处理。
* **词表分桶**（按首字符/脚本），减少一次性正则长度。
* **英文词形派生**：复数/时态/不规则动词映射至词根。
* **就地编辑**：从悬浮卡片直接修改词条并保存。
* **更好边界**：连字符/撇号/驼峰的细粒度规则。

### v0.5 — 架构与学习

* **Web Worker 分词/匹配**：主线程更流畅。
* **结果缓存**（段落级、滚动复用）与 LRU 清理。
* **学习模式**：生词本、熟练度、**间隔重复（SRS）**。
* **Anki/Quizlet 导出**；学习统计与提醒。

### v0.6 — 团队/企业版（Hollyland 场景）

* **多词库分层**：通用/品牌/产品/项目；按域名启用策略。
* **协作与审核**：编辑权限、发布版本、变更记录。
* **词库合并/冲突解决**：差异对比、批量处理。
* **备份与同步**：可选私有端点/云盘（保持本地优先与隐私）。

### v0.7 — 语义增强

* **多义词消歧**：基于邻近上下文选择合适释义/场景。
* **近义/反义/常见搭配**：卡片内扩展信息。
* **实体/术语识别优化**：产品名、数字-单位（ms、dB）规则化。

### v0.8 — 插件化与生态

* **插件/钩子机制**：允许注入自定义匹配器或卡片渲染器。
* **导入连接器**：从 CMS/术语表/翻译记忆库同步（可选、可控）。

### v1.0 — 稳定与长期维护

* 完整测试矩阵、权限最小化开关、文档与示例齐备。
* 性能、兼容与边界场景收敛；长期维护节奏确定。

---

## 技术任务拆解（精选）

* **匹配**：
  * 视口扫描与分桶（v0.4）
  * Worker 化与缓存（v0.5）
* **数据**：
  * CSV/TSV 解析器与映射 UI（v0.3）
  * 词库分层与策略（v0.6）
* **UI/交互**：
  * Pin 与快捷键（v0.3）
  * 就地编辑（v0.4）
* **协作**：
  * 版本、审核、差异（v0.6）
* **语义**：
  * 词形派生（v0.4）
  * 消歧与搭配（v0.7）

---

## 验收与质量

* 性能基线：1000+ 词条、10k+ 词/页，首屏处理 < 150ms，滚动增量 < 60ms。
* 可用性：所有新增交互支持键盘操作与暗色模式。
* 兼容性：最新版 Chrome、Edge；含 iframe 与 SPA 场景。
* 安全与隐私：默认不出网；权限按需启用；可关闭通知权限。

---

## 风险与依赖

* 浏览器策略变更可能限制注入/通知权限（已做降级兜底）。
* 极端长页面/复杂布局下的性能不确定性（计划通过视口扫描与 Worker 化解决）。
* 团队词库的协作流程与权限模型需结合实际工作流验证（Hollyland 场景试点）。

---

## 贡献

欢迎提 issue/PR：

* 提交前请附：问题复现链接、浏览器版本、控制台日志/Network 截图、示例词典。
* 代码风格：ES2020+，尽量零依赖；文档使用 Markdown；commit 信息清晰。
